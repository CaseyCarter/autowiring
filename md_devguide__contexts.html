<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Autowiring: Contexts</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Autowiring
   &#160;<span id="projectnumber">0.7.7</span>
   </div>
   <div id="projectbrief">A C++ Inversion of Control Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="pages.html"><span>Developer's&#160;Guide</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_devguide__contexts.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Contexts </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Contexts are the base container and scope mechanism of autowiring. The context determines how autowired dependencies are resolved, how events are broadcast, the scope of filter graph networks, and the lifetime of threads.</p>
<p>Every application has a global context, which is created automatically. You can also create additional contexts as needed. Contexts are created in a tree structure with the global context at its root.</p>
<h1>Getting a Context</h1>
<p>If you do nothing else, every autowiring operation takes place within the global context. There is always a single <em>current</em> context. When you start the application, the global context is current. You can change the current context as needed.</p>
<p>To get a reference to the global context, use: </p><pre class="fragment">AutoGlobalContext global;
</pre><p>Avoid holding this reference longer than necessary.</p>
<p>Get a reference to the current context with: </p><pre class="fragment">AutoCurrentContext current;
</pre><p>You can use the <a class="el" href="class_context_enumerator.html" title="A virtual container which may be used to enumerate all children of a particular context ...">ContextEnumerator</a> and <a class="el" href="class_context_enumerator_t.html" title="CurrentContextEnumeratorT. ">ContextEnumeratorT</a> classes to enumerate existing contexts.</p>
<h1>Creating Contexts</h1>
<p>The simplest way to create a new context is with: </p><pre class="fragment">AutoCreateContext newContext;
</pre><p>This creates a new context as a child of the current context. You can also create a context as a child of another context with the <a class="el" href="class_core_context.html#a6edf5743ee22ca42a0ca3d8cff226fca" title="Creates a child context of this context. ">CoreContext::Create()</a> and CoreContext::CreatePeer() methods.</p>
<h2>Sigils</h2>
<p>You can categorize your contexts by assigning a sigil class at creation. A sigil class serves as a marker, which you can use to identify contexts by type. The sigil class can be any type, even an empty class declaration. Use the <a class="el" href="class_auto_create_context_t.html" title="Provides a simple way to create a child of the current context using a sigil. ">AutoCreateContextT</a> template to create a class with a sigil: </p><pre class="fragment">class Foo{};
AutoCreateContextT&lt;Foo&gt; contextWithSigil;
</pre><p>You can check the sigil of a context with <a class="el" href="class_core_context.html#a000005b5f276de444327cab8ccc2a785" title="The type used as a sigil when creating this class, if any. ">CoreContext::GetSigilType()</a>. (Use the autowiring::demangle() function to get a human-readable string from the std::type_info object.) You can also enumerate contexts that share a given sigil using <a class="el" href="class_context_enumerator_t.html" title="CurrentContextEnumeratorT. ">ContextEnumeratorT</a>. The sigil class used for the global context is <a class="el" href="class_global_core_context.html" title="A special class designed to make it easier to detect when our context is the global context...">GlobalCoreContext</a>.</p>
<h1>Changing Contexts</h1>
<p>All basic autowiring operations take place in the current context. You can change contexts in a number of ways:</p>
<ul>
<li><a class="el" href="class_core_context.html#ad306c1c3703311ba1fe7fdb4add279f9" title="Makes this context the current context. ">CoreContext::SetCurrent()</a> makes a given context the current context: <pre class="fragment">AutoCreateContext foo;
foo-&gt;SetCurrent();
</pre></li>
<li>The <a class="el" href="class_current_context_pusher.html" title="Saves the current context and makes the passed one current, and then restores the current context whe...">CurrentContextPusher</a> class provides stack-like behavior that stores a reference to the current context when changing contexts and then restores it when the <a class="el" href="class_current_context_pusher.html" title="Saves the current context and makes the passed one current, and then restores the current context whe...">CurrentContextPusher</a> object goes out of scope. <pre class="fragment">{ //limits scope
    CurrentContextPusher push(ctxt); //Saves the current context before swithing to ctxt
    // ... perform some actions
} // push goes out of scope, restoring previous context
</pre></li>
<li><a class="el" href="class_core_context.html#aac1878fadff510297d81f6beb32b38ef" title="Makes no context current. ">CoreContext::EvictCurrent()</a>, a static function, effectively makes the global context current.</li>
</ul>
<h1>Enumerating Contexts</h1>
<p>The easiest way to enumerate contexts is with the <a class="el" href="class_context_enumerator.html" title="A virtual container which may be used to enumerate all children of a particular context ...">ContextEnumerator</a> classes. <a class="el" href="class_context_enumerator.html" title="A virtual container which may be used to enumerate all children of a particular context ...">ContextEnumerator</a> enumerates all children of a specified context. <a class="el" href="class_current_context_enumerator.html" title="CurrentContextEnumerator. ">CurrentContextEnumerator</a> is a special case that enumerates the current context. When enumerating, the parent context is included. <a class="el" href="class_context_enumerator_t.html" title="CurrentContextEnumeratorT. ">ContextEnumeratorT</a> enumerates only those children created with a specific sigil class. The parent context is included in the enumeration is it has the matching sigil.</p>
<p>To enumerate all contexts:</p>
<div class="fragment"><div class="line"><a class="code" href="class_auto_global_context.html">AutoGlobalContext</a> global;</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">auto</span> context : <a class="code" href="class_context_enumerator.html">ContextEnumerator</a>(global)){</div>
<div class="line">    <a class="code" href="class_current_context_pusher.html">CurrentContextPusher</a> push(context);</div>
<div class="line">    <span class="comment">// Perform some action</span></div>
<div class="line">} <span class="comment">//Previous context restored</span></div>
</div><!-- fragment --><p>If you use the <a class="el" href="class_current_context_pusher.html" title="Saves the current context and makes the passed one current, and then restores the current context whe...">CurrentContextPusher</a> class to change to the enumerated context, the current context is restored automatically when the for-loop terminates.</p>
<p>Similarly, to enumerate all contexts with the sigil class, Foo:</p>
<div class="fragment"><div class="line"><a class="code" href="class_auto_global_context.html">AutoGlobalContext</a> global;</div>
<div class="line"><span class="keywordflow">for</span>(<span class="keyword">auto</span> context : <a class="code" href="class_context_enumerator_t.html">ContextEnumeratorT&lt;Foo&gt;</a>(global)){</div>
<div class="line">    <a class="code" href="class_current_context_pusher.html">CurrentContextPusher</a> push(context);</div>
<div class="line">    <span class="comment">// Perform some action</span></div>
<div class="line">} <span class="comment">//Previous context restored</span></div>
</div><!-- fragment --><p>Alternately, you can enumerate contexts manually with the <a class="el" href="class_core_context.html" title="A top-level container class representing an autowiring domain, a minimum broadcast domain...">CoreContext</a> functions like CoreContext::firstChild() and CoreContext::nextSibling();</p>
<h1>Autowiring Members to a Context</h1>
<p>The Autowiring library provides a few classes for adding objects to a context and connecting resources to the requested resources.</p>
<p>When you autowire a type, the autowiring system looks for an existing instance of that type and assigns a shared pointer to the existing instance, if one exists. Dependencies wired to a child context can be satisfied by resources in parent (or other direct ancestor) context, but not by one in a peer or sub-child context.</p>
<p>The primary ways to autowire a dependency to a context include:</p>
<ul>
<li>Autowire &ndash; creates a "slot" for a type in a context, but does not create an instance of that type. If the resource already exists, the slot is assigned a shared pointer to the existing instance. Otherwise, the slot is filled when a suitable instance is created in the context or a parent context. You can use Autowire::NotifyWhenAutowired() to detect when the dependency is resolved.</li>
<li><a class="el" href="class_auto_required.html" title="Autowires the specified dependency, creating a new instance if one does not already exist...">AutoRequired</a> &ndash; Works like <a class="el" href="class_autowired.html" title="Autowires a &quot;slot&quot; in a context to which an instance of the specified type will be wired when it beco...">Autowired</a>, but if no suitable instance of the specified type exists, <a class="el" href="class_auto_required.html" title="Autowires the specified dependency, creating a new instance if one does not already exist...">AutoRequired</a> attempts to create one.</li>
<li><a class="el" href="class_autowired_fast.html" title="Autowires a slot immediately (with limitations). ">AutowiredFast</a> &ndash; Works like <a class="el" href="class_autowired.html" title="Autowires a &quot;slot&quot; in a context to which an instance of the specified type will be wired when it beco...">Autowired</a> (only faster) if the resource already exists. However, if no suitable resource is immediately found, the dependency is never satisfied. Use where performance optimization is warrented and you know that the dependencies already exist.</li>
</ul>
<p>Only one instance of a type can be autowired to a context. All slots created for the same type will be filled with a shared pointer to the same instance.</p>
<p>The type specified in an autowiring declaration does not need to be a concrete type. If you autowire (but nor auto-require) a pure abstract type, for example, the dependency can be resolved by any concrete implementation of that type. However, if more than one concrete type already exists in a context, autowiring a common super type leads to an exception. Attempting to use <a class="el" href="class_auto_required.html" title="Autowires the specified dependency, creating a new instance if one does not already exist...">AutoRequired</a> for a type that cannot be constructed also leads to an exception. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Jan 6 2016 16:25:19 for Autowiring by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
